
인메모리 기반으로 클라이언트 측 요청에 대해 제한설정을 제어하기에는 서버마다 메모리가 분리되어 관리되기에 데이터 일관성을 보장하는데에 어려움이 존재한다. 

그렇기에 아래 기재된 해결책 내용을 토대로 설계에 반영시키면 동시성 관련 문제가 어느정도 해소될 수 있지 않을까


[원인]
1. 3대의 서버에서 예매 요청 API가 독립적으로 동작되어 각 서버마다 요청 횟수를 확인하여 제한 설정이 무의미
2. 동시에 발생한 요청들이 카운트 제한 설정을 넘어가는 현상 발생 우려

[해결]
1. 3대의 서버가 같은 요청 횟수를 바라보며 카운트를 확인하고 증가시킬 수 있도록 단일 서버에서 운영되는 레디스를 통해 일관된 데이터 보장  
2. 여러 요청이 동시에 발생할 때에 같은 시점에서 카운트 값 갱신 시, 레디스 RPOPLPUSH 명령어를 통해 Pop과 Push를 동시에 처리함으로써 원자적 연산을 보장하여 Race Condition 방지

---

[1번 항목 다이어그램]

<img width="748" height="396" alt="Image" src="https://github.com/user-attachments/assets/c769a037-5e91-4a4a-9829-d6f468ce3ea1" />
